import React, { useRef } from "react";
import styled from "@emotion/styled";
// import { css } from "@emotion/react";
// import debounce from "lodash/debounce";
// import { mq } from "../../styles/variables";
// import { mq } from "../../styles/variables";

const SVGWrapper = styled.div`
  z-index: -100;
  opacity: 0.2;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 100%;
  will-change: transform;
  svg {
    min-height: 100%;
    min-width: 100%;
  }
`;

export const constrain = (n: number, low: number, high: number) => {
  return Math.max(Math.min(n, high), low);
};

// eslint-disable-next-line max-params
export const map = (n: number, start1: number, stop1: number, start2: number, stop2: number, withinBounds = true) => {
  const newval = ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;

  if (!withinBounds) {
    return newval;
  }
  if (start2 < stop2) {
    return constrain(newval, start2, stop2);
  }

  return constrain(newval, stop2, start2);
};

export const getHeight = () => {
  return (
    window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName("body")[0].clientHeight
  );
};

const BackgroundSVG: React.FC = ({ children }) => {
  const svgWrapperRef = useRef<HTMLDivElement>(null);
  // const requestRef = useRef(0);

  // useEffect(() => {
  //   let scrollY = 0;
  //   let ticking = false;
  //   const update = () => {
  //     if (svgWrapperRef?.current !== null) {
  //       svgWrapperRef.current.style.transform = `translate3D(0, ${map(
  //         scrollY,
  //         0,
  //         document.body.clientHeight,
  //         0,
  //         -75,
  //       )}%, 0)`;
  //     }
  //     // setTicking(false);
  //     ticking = false;
  //   };
  //   const requestTick = () => {
  //     if (!ticking) {
  //       requestRef.current = window.requestAnimationFrame(update);
  //       ticking = true;
  //     }
  //   };
  //   const handleScroll = () => {
  //     scrollY = window.scrollY;
  //     requestTick();
  //   };

  //   window.addEventListener("scroll", handleScroll);

  //   return () => {
  //     window.cancelAnimationFrame(requestRef.current);
  //     window.removeEventListener("scroll", debounce(handleScroll));
  //   };
  // }, []);

  return (
    <div
    // css={css`
    //   height: 100%;
    // `}
    >
      <SVGWrapper ref={svgWrapperRef}>
        <svg
          viewBox="400 400 3467 3467"
          xmlns="http://www.w3.org/2000/svg"
          fillRule="evenodd"
          clipRule="evenodd"
          strokeLinejoin="round"
          strokeMiterlimit="2"
        >
          <path
            d="M1562.118 638.466h-.008c-114.827.009-227.061 36.756-316.05 103.472-68.901 51.655-119.562 112.843-150.58 181.86-30.821 68.588-40.57 142.751-28.195 214.468 18.023 104.465 81.006 195.112 172.056 253.486-128.513 46.43-252.145 121.125-368.403 222.699-115.383 100.815-224.336 228.805-323.83 380.417-216.093 329.295-323.387 667.01-359.487 796.923l-77.505 278.93 270.193-103.956c196.073-75.44 349.618-113.687 456.372-113.687 115.872.004 141.697 39.888 193.15 119.343 23.4 36.139 49.928 77.102 87.193 113.284 12.74 12.366 26.113 23.533 40.107 33.487l-426.883 109.346 442.87 161.1c252.796 91.958 519.733 138.586 793.392 138.586 247.393 0 498.42-40.124 706.85-112.98 91.825-32.098 173.62-70.165 236.535-110.083 80.063-50.794 130.154-104.025 153.146-162.728l22.038-56.27 90.87-14.152c48.654-7.585 96.53-16.523 132.801-23.465 140.806-26.943 406.149-101.873 473.19-133.628 67.222-31.833 120.595-67.282 163.17-108.365 63.416-61.193 100.219-132.575 109.384-212.167 10.31-89.52-15.88-183.347-77.844-278.874-58.514-90.206-148.694-183.133-275.694-284.09-19.175-15.24-36.923-28.99-52.786-40.89-177.108-141.32-434.832-267.708-620.17-348.97-193.94-85.035-398.166-159.283-550.824-200.864-41.778-248.965-165.076-434.129-347.998-522.44-51.625-27.295-106.857-45.043-162.44-52.4a395.133 395.133 0 00-18.726-32.27c-28.062-43.466-64.368-80.946-107.907-111.403-77.175-53.986-175.899-83.719-277.987-83.719z"
            fill="#a8803b"
            fillRule="nonzero"
          />
          <path
            d="M1562.097 737.02c-93.62 0-184.864 29.75-256.918 83.769-108.413 81.28-159.729 190.892-140.776 300.718 17.953 104.05 97.81 190.061 208.413 224.473 16.107 5.01 40.693 15.756 61.385 30.895 19.784 14.465 24.878 25.015 25.307 27.5-.909 2.125-15.156 29.99-122.308 59.569-139.885 38.61-274.94 114.222-401.418 224.725-108.644 94.924-211.691 216.14-306.276 360.27-208.478 317.683-312.065 643.78-346.927 769.234l-25.075 90.244 87.416-33.632c207.398-79.797 372.85-120.26 491.765-120.26 76.648 0 135.917 16.471 181.204 50.37 40.57 30.362 66.857 70.961 94.688 113.956 42.99 66.408 91.714 141.676 196.77 158.734 36.885 5.995 73.38 9.029 108.477 9.029 84.593 0 165.008-17.269 243.94-52.568-101.681 60.019-245.62 120.535-450.536 173.025l-147.7 37.831 143.282 52.122c255.509 92.948 522.372 140.073 793.178 140.073 219.125 0 440.385-32.762 623.016-92.25 77.265-25.165 146.042-54.692 198.9-85.393 55.987-32.523 92.644-65.29 108.944-97.388l11.6-22.842-12.864-22.162c-11.372-19.59-6.539-34.926 11.393-77.27 12.41-29.3 27.848-65.768 31.212-110.07L2981.82 2803l-89.931 89.799c-85.313 85.184-153.477 137.978-229.602 137.978-27.732 0-57.757-6.826-90.93-20.752 53.63-70.735 115.996-127.167 185.917-168.148 85.587-50.163 180.155-75.594 281.072-75.594 52.456 0 106.562 6.959 161.575 20.739-36.978 31.811-87.617 67.367-124.772 90.437l-52.777 32.75 45.755 42.009 31.93 29.326 16.943 15.554 22.689-3.784s113.858-18.978 170.881-28.516c175.45-29.347 358.09-106.711 428.469-138.616 132.288-59.963 205.572-140.58 217.814-239.612 8.236-66.592-12.537-139.1-61.732-215.517-51.968-80.715-137.927-169.027-255.492-262.48-18.948-15.062-36.37-28.55-51.8-40.103-90.784-72.612-268.239-188.741-598.656-330.49-196.33-84.224-419.072-165.281-595.824-216.837-1.457-.424-2.434-.814-3.034-1.089-1.958-5.244-2.6-19.792-3.033-29.621-.304-6.895-.617-14.029-1.247-21.656-9.598-116.733-60.379-242.277-135.827-335.829-42.245-52.379-90.716-93.78-144.054-123.058-59.68-32.758-123.838-49.366-190.7-49.37a396.537 396.537 0 00-15.918.312c-19.813-64.256-59.303-118.259-115.842-157.834-60.786-42.545-139.49-65.979-221.598-65.979z"
            fill="#fff"
            fillRule="nonzero"
          />
          <path
            d="M327.995 2830.796c915.065-352.081 720.39 156.66 988.911 200.268 268.518 43.608 452.293-86.53 651.155-290.713-24.33 34.733-21.622 327.049-745.135 512.375 839.12 305.248 1596.03 25.581 1665.896-111.998-40.398-69.596 29.454-123.564 36.37-214.575-144.247 144.037-246.78 201.583-424.02 101.637 170.834-260.179 452.454-380.443 784.089-264.288-35.488 61.051-185.258 154-185.258 154l31.935 29.325s113.846-18.982 170.856-28.516c150.002-25.088 312.828-87.934 416.788-135.055 183.244-83.063 363.064-262.31-109.282-637.786-19.278-15.327-36.349-28.525-51.32-39.721-288.271-230.935-887.823-454.478-1178.823-539.353-44.293-12.92-37.647-51.813-41.096-93.754-18.194-221.25-199.231-500.84-475.984-461.205C1824.79 777.4 1518.292 719.922 1333.455 858.5c-206.395 154.74-137.383 383.13 53.364 442.472 79.515 24.737 242.238 131.302-37.077 208.404-567.342 156.61-907.628 910.717-1021.747 1321.42z"
            fill="#223550"
            fillRule="nonzero"
          />
          <path
            d="M2601.596 1756.067l306.508 110.203c-20.366 173.654-254.03 136.474-306.508-110.203z"
            fill="#fff"
            fillRule="nonzero"
          />
          <path
            d="M2201.854 1883.015c45.501-70.59 179.486-114.518 305.556-141.826-16.72 91.213 80.817 196.3 80.817 196.3-64.166 30.569-151.098-47.464-151.098-47.464 234.56 299.798 448.093 207.132 514.813 122.484l517.308 234.547-258.894-214.245s188.994 38.697 421.797 205.812c3.03 3.064 6.106 6.162 9.217 9.299 104.791 78.17 275.789 304.45 186.153 379.543-80.526 67.466-78.465-44.121-150.323-207.338-39.228 71.807-73.173 135.498-163.807 97.473-43.222-18.133-104.937 40.441-159.441 45.262-161.588 14.294-323.759 19.136-483.525 17.808 180.647-33.56 479.643-73.752 541.572-103.198 70.47-33.508 71.494-86.1 71.494-86.1-381.776-137.631-955.734 76.442-1252.785 133.676 0 0 306.28-193.507 901.817-283.455-147.447-5.52-565.91-6.415-655.456-9.32-108.314-3.518-192.607-65.302-269.01-155.263-57.941-68.224-50.044-126.002-6.205-193.995zM2226.03 1596.12c-22.664-141.282-116.644-336.245-242.513-440.252 72.166 5.035 124.377 77.385 185.652 152.337-32.09-119.116-108.456-217.767-224.992-226.106-103.03-7.378-210.856 25.847-250.898 150.062-57.55 178.547 59.093 282.842 160.242 395.312-127.008-53.283-220.556-182.049-223.016-314.182-2.536-136.286 59.29-266.885 201.215-296.854 358.505-75.697 474.12 331.296 394.31 579.683z"
            fill="#7c8081"
            fillRule="nonzero"
          />
        </svg>
      </SVGWrapper>
      {children}
    </div>
  );
};

export default BackgroundSVG;
